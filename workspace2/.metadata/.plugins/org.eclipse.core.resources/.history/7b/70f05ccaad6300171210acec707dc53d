<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Day Vs Temperature</title>
</head>
<body>
<button>Get Chart</button>

<div id="container"	 style="min-width:310px; height:400px; margin:0 auto"></div>
	<script>
	$(document).ready(function(){
    $("button").click(function(){
    	$.ajax({url: "http://localhost:8080/RESTfulExample/rest/tabletemp/Temp", 
        	success: function(result){
        		console.log(result);
        		var seriesData = [];
        		var tmpData = [];
        		for(i=0;i<result.length;i++){
        			console.log(result[i].day);
        			tmpData = [
								new Date(new Date(result[i].day).getTime())
        						,
        						result[i].temperature
        					]
        			seriesData.push(tmpData);
        		}
        		console.log(seriesData);
        		       		
			Highcharts.chart('container', {
   						 chart: {
       							type: 'line'
   								 },
   						 title: {
     						    text: 'Day vs Temperature'
    								},
    					 subtitle: {
        						text: 'Source: WorldClimate.com'
    								},
   						 xAxis: {
   							type: 'datetime'
    								},			
   						 yAxis: {
       							 title: {
            							text: 'Temperature (°C)'
        									}
    								},
    								 tooltip: {
    				        		        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
    				        		        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
    				        		            '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
    				        		        footerFormat: '</table>',
    				        		        shared: true,
    				        		        useHTML: true
    				        		    },
    				        		    plotOptions: {
    				        		        line: {
    				        		            pointPadding: 0.2,
    				        		            borderWidth: 0
    				        		        }
    				        		    },
    					series:[{
    			            type: 'area',
    			            name: 'USD to EUR',
    			            data: seriesData
    			        }] 
    						
												});


															},
				error : function (a,b,c){
				console.log(a,b,c);
											}
			});
	});
	});
   </script>
</body>
</html>