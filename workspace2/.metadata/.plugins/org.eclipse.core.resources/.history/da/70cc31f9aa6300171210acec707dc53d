<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Day Vs Temperature</title>
</head>
<body>
<button>Get Chart</button>

<div id="container"	 style="min-width:310px; height:400px; margin:0 auto"></div>
	<script>
	$(document).ready(function(){
    $("button").click(function(){
    	$.ajax({url: "http://localhost:8080/RESTfulExample/rest/tabletemp/Temp", 
        	success: function(result){
        		console.log(result);
        		var seriesData = [];
        		var tmpData = {};
        		for(i=0;i<result.length;i++){
        			console.log(result[i].day);
        			tmpData = {
        						name : result[i].day,
        						data :[result[i].temperature]
        					}
        			seriesData.push(tmpData);
        		}
        		console.log(seriesData);
        		       		
			Highcharts.chart('container', {
   						 chart: {
       							type: 'line'
   								 },
   						 title: {
     						    text: 'Day vs Temperature'
    								},
    					 subtitle: {
        						text: 'Source: WorldClimate.com'
    								},
   						 xAxis: {
        						categories: ['2017-07-01',
        						             '2017-07-02',
        						             '2017-07-03',
        						             '2017-07-04',
        						             '2017-07-05',
        						             '2017-07-06',
        						             '2017-07-07',
        						             '2017-07-08',
        						             '2017-07-09',
        						             '2017-07-10',
        						             '2017-07-11']
    								},			
   						 yAxis: {
       							 title: {
            							text: 'Temperature (°C)'
        									}
    								},
   						 plotOptions: {
        								line: {
          									  dataLabels: {
                											enabled: true
            												},
            									enableMouseTracking: false
        										}
    										},
    					series:seriesData
												});


															},
				error : function (a,b,c){
				console.log(a,b,c);
											}
			});
	});
	});
   </script>
</body>
</html>